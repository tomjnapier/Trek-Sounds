class G{constructor(t){this.timer=null,this.player=document.getElementById("lcars-audio-output"),this.buttons={play:document.querySelector('[data-action="play"]'),settings:document.querySelector('[data-action="settings"]'),setCurrent:document.querySelectorAll('[data-action="set-current"]'),activeClass:"lcars-button--active"}}init(){const t=this.buttons.play;this.buttons.settings;const i=this.buttons.setCurrent;this.updatePlayerStatus("paused"),t.addEventListener("click",()=>{this.playerStart()}),i.forEach(l=>{l.addEventListener("click",()=>{this.updateSrc(l)})})}playerStart(){const t=this.buttons.play,i=this.buttons.activeClass,l=this.player,s=l.getAttribute("data-status");let c=l.getAttribute("src");c!=null&&(s=="paused"&&c!==""?(l.play(),this.updatePlayerStatus("playing"),t.classList.add(i),t.textContent="01A-Pause"):(l.pause(),this.updatePlayerStatus("paused"),t.classList.remove(i),c==null?t.textContent="01-Play":t.textContent="01-Awaiting Src"))}updateSrc(t){const i=this.player,l=this.buttons.activeClass,s=this.buttons.setCurrent,c=this.buttons.play,r=t.dataset.src;r!==null&&i.setAttribute("src",r),c.classList.remove(l),this.updatePlayerStatus("paused"),c.textContent="01-Play",t.classList.contains(l)?(t.classList.remove(l),i.setAttribute("src","")):(s.forEach(V=>{V.classList.remove(l)}),t.classList.toggle(l))}updatePlayerStatus(t){const i=this.player;typeof t!==void 0&&i.setAttribute("data-status",t)}}function a(e,t,i,l){if(typeof t=="function"?e!==t||!l:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?l:i==="a"?l.call(e):l?l.value:t.get(e)}function y(e,t,i,l,s){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,i),i}var w,h,p,f,C;const u="__TAURI_TO_IPC_KEY__";function E(e,t=!1){return window.__TAURI_INTERNALS__.transformCallback(e,t)}class H{constructor(t){w.set(this,void 0),h.set(this,0),p.set(this,[]),f.set(this,void 0),y(this,w,t||(()=>{})),this.id=E(i=>{const l=i.index;if("end"in i){l==a(this,h,"f")?this.cleanupCallback():y(this,f,l);return}const s=i.message;if(l==a(this,h,"f")){for(a(this,w,"f").call(this,s),y(this,h,a(this,h,"f")+1);a(this,h,"f")in a(this,p,"f");){const c=a(this,p,"f")[a(this,h,"f")];a(this,w,"f").call(this,c),delete a(this,p,"f")[a(this,h,"f")],y(this,h,a(this,h,"f")+1)}a(this,h,"f")===a(this,f,"f")&&this.cleanupCallback()}else a(this,p,"f")[l]=s})}cleanupCallback(){window.__TAURI_INTERNALS__.unregisterCallback(this.id)}set onmessage(t){y(this,w,t)}get onmessage(){return a(this,w,"f")}[(w=new WeakMap,h=new WeakMap,p=new WeakMap,f=new WeakMap,u)](){return`__CHANNEL__:${this.id}`}toJSON(){return this[u]()}}async function n(e,t={},i){return window.__TAURI_INTERNALS__.invoke(e,t,i)}class N{get rid(){return a(this,C,"f")}constructor(t){C.set(this,void 0),y(this,C,t)}async close(){return n("plugin:resources|close",{rid:this.rid})}}C=new WeakMap;var T;(function(e){e[e.TopLeft=0]="TopLeft",e[e.TopRight=1]="TopRight",e[e.BottomLeft=2]="BottomLeft",e[e.BottomRight=3]="BottomRight",e[e.TopCenter=4]="TopCenter",e[e.BottomCenter=5]="BottomCenter",e[e.LeftCenter=6]="LeftCenter",e[e.RightCenter=7]="RightCenter",e[e.Center=8]="Center",e[e.TrayLeft=9]="TrayLeft",e[e.TrayBottomLeft=10]="TrayBottomLeft",e[e.TrayRight=11]="TrayRight",e[e.TrayBottomRight=12]="TrayBottomRight",e[e.TrayCenter=13]="TrayCenter",e[e.TrayBottomCenter=14]="TrayBottomCenter"})(T||(T={}));async function q(e){await n("plugin:positioner|move_window",{position:e})}async function J(e){await n("plugin:positioner|set_tray_icon_state",{position:e.rect.position,size:e.rect.size})}class g extends N{constructor(t){super(t)}static async new(t,i,l){return n("plugin:image|new",{rgba:m(t),width:i,height:l}).then(s=>new g(s))}static async fromBytes(t){return n("plugin:image|from_bytes",{bytes:m(t)}).then(i=>new g(i))}static async fromPath(t){return n("plugin:image|from_path",{path:t}).then(i=>new g(i))}async rgba(){return n("plugin:image|rgba",{rid:this.rid}).then(t=>new Uint8Array(t))}async size(){return n("plugin:image|size",{rid:this.rid})}}function m(e){return e==null?null:typeof e=="string"?e:e instanceof g?e.rid:e}class D{constructor(...t){this.type="Logical",t.length===1?"Logical"in t[0]?(this.width=t[0].Logical.width,this.height=t[0].Logical.height):(this.width=t[0].width,this.height=t[0].height):(this.width=t[0],this.height=t[1])}toPhysical(t){return new _(this.width*t,this.height*t)}[u](){return{width:this.width,height:this.height}}toJSON(){return this[u]()}}class _{constructor(...t){this.type="Physical",t.length===1?"Physical"in t[0]?(this.width=t[0].Physical.width,this.height=t[0].Physical.height):(this.width=t[0].width,this.height=t[0].height):(this.width=t[0],this.height=t[1])}toLogical(t){return new D(this.width/t,this.height/t)}[u](){return{width:this.width,height:this.height}}toJSON(){return this[u]()}}class b{constructor(t){this.size=t}toLogical(t){return this.size instanceof D?this.size:this.size.toLogical(t)}toPhysical(t){return this.size instanceof _?this.size:this.size.toPhysical(t)}[u](){return{[`${this.size.type}`]:{width:this.size.width,height:this.size.height}}}toJSON(){return this[u]()}}class M{constructor(...t){this.type="Logical",t.length===1?"Logical"in t[0]?(this.x=t[0].Logical.x,this.y=t[0].Logical.y):(this.x=t[0].x,this.y=t[0].y):(this.x=t[0],this.y=t[1])}toPhysical(t){return new d(this.x*t,this.y*t)}[u](){return{x:this.x,y:this.y}}toJSON(){return this[u]()}}class d{constructor(...t){this.type="Physical",t.length===1?"Physical"in t[0]?(this.x=t[0].Physical.x,this.y=t[0].Physical.y):(this.x=t[0].x,this.y=t[0].y):(this.x=t[0],this.y=t[1])}toLogical(t){return new M(this.x/t,this.y/t)}[u](){return{x:this.x,y:this.y}}toJSON(){return this[u]()}}class v{constructor(t){this.position=t}toLogical(t){return this.position instanceof M?this.position:this.position.toLogical(t)}toPhysical(t){return this.position instanceof d?this.position:this.position.toPhysical(t)}[u](){return{[`${this.position.type}`]:{x:this.position.x,y:this.position.y}}}toJSON(){return this[u]()}}class L extends N{constructor(t,i){super(t),this.id=i}static async getById(t){return n("plugin:tray|get_by_id",{id:t}).then(i=>i?new L(i,t):null)}static async removeById(t){return n("plugin:tray|remove_by_id",{id:t})}static async new(t){t!=null&&t.menu&&(t.menu=[t.menu.rid,t.menu.kind]),t!=null&&t.icon&&(t.icon=m(t.icon));const i=new H;if(t!=null&&t.action){const l=t.action;i.onmessage=s=>l($(s)),delete t.action}return n("plugin:tray|new",{options:t??{},handler:i}).then(([l,s])=>new L(l,s))}async setIcon(t){let i=null;return t&&(i=m(t)),n("plugin:tray|set_icon",{rid:this.rid,icon:i})}async setMenu(t){return t&&(t=[t.rid,t.kind]),n("plugin:tray|set_menu",{rid:this.rid,menu:t})}async setTooltip(t){return n("plugin:tray|set_tooltip",{rid:this.rid,tooltip:t})}async setTitle(t){return n("plugin:tray|set_title",{rid:this.rid,title:t})}async setVisible(t){return n("plugin:tray|set_visible",{rid:this.rid,visible:t})}async setTempDirPath(t){return n("plugin:tray|set_temp_dir_path",{rid:this.rid,path:t})}async setIconAsTemplate(t){return n("plugin:tray|set_icon_as_template",{rid:this.rid,asTemplate:t})}async setMenuOnLeftClick(t){return n("plugin:tray|set_show_menu_on_left_click",{rid:this.rid,onLeft:t})}async setShowMenuOnLeftClick(t){return n("plugin:tray|set_show_menu_on_left_click",{rid:this.rid,onLeft:t})}}function $(e){const t=e;return t.position=new d(e.position),t.rect.position=new d(e.rect.position),t.rect.size=new _(e.rect.size),t}var R;(function(e){e[e.Audio=1]="Audio",e[e.Cache=2]="Cache",e[e.Config=3]="Config",e[e.Data=4]="Data",e[e.LocalData=5]="LocalData",e[e.Document=6]="Document",e[e.Download=7]="Download",e[e.Picture=8]="Picture",e[e.Public=9]="Public",e[e.Video=10]="Video",e[e.Resource=11]="Resource",e[e.Temp=12]="Temp",e[e.AppConfig=13]="AppConfig",e[e.AppData=14]="AppData",e[e.AppLocalData=15]="AppLocalData",e[e.AppCache=16]="AppCache",e[e.AppLog=17]="AppLog",e[e.Desktop=18]="Desktop",e[e.Executable=19]="Executable",e[e.Font=20]="Font",e[e.Home=21]="Home",e[e.Runtime=22]="Runtime",e[e.Template=23]="Template"})(R||(R={}));async function j(e){return n("plugin:path|resolve_directory",{directory:R.Resource,path:e})}var o;(function(e){e.WINDOW_RESIZED="tauri://resize",e.WINDOW_MOVED="tauri://move",e.WINDOW_CLOSE_REQUESTED="tauri://close-requested",e.WINDOW_DESTROYED="tauri://destroyed",e.WINDOW_FOCUS="tauri://focus",e.WINDOW_BLUR="tauri://blur",e.WINDOW_SCALE_FACTOR_CHANGED="tauri://scale-change",e.WINDOW_THEME_CHANGED="tauri://theme-changed",e.WINDOW_CREATED="tauri://window-created",e.WEBVIEW_CREATED="tauri://webview-created",e.DRAG_ENTER="tauri://drag-enter",e.DRAG_OVER="tauri://drag-over",e.DRAG_DROP="tauri://drag-drop",e.DRAG_LEAVE="tauri://drag-leave"})(o||(o={}));async function P(e,t){window.__TAURI_EVENT_PLUGIN_INTERNALS__.unregisterListener(e,t),await n("plugin:event|unlisten",{event:e,eventId:t})}async function F(e,t,i){var l;const s=typeof(i==null?void 0:i.target)=="string"?{kind:"AnyLabel",label:i.target}:(l=i==null?void 0:i.target)!==null&&l!==void 0?l:{kind:"Any"};return n("plugin:event|listen",{event:e,target:s,handler:E(t)}).then(c=>async()=>P(e,c))}async function Z(e,t,i){return F(e,l=>{P(e,l.id),t(l)},i)}async function Q(e,t){await n("plugin:event|emit",{event:e,payload:t})}async function Y(e,t,i){await n("plugin:event|emit_to",{target:typeof e=="string"?{kind:"AnyLabel",label:e}:e,event:t,payload:i})}var W;(function(e){e[e.Critical=1]="Critical",e[e.Informational=2]="Informational"})(W||(W={}));class K{constructor(t){this._preventDefault=!1,this.event=t.event,this.id=t.id}preventDefault(){this._preventDefault=!0}isPreventDefault(){return this._preventDefault}}var x;(function(e){e.None="none",e.Normal="normal",e.Indeterminate="indeterminate",e.Paused="paused",e.Error="error"})(x||(x={}));function k(){return new U(window.__TAURI_INTERNALS__.metadata.currentWindow.label,{skip:!0})}async function A(){return n("plugin:window|get_all_windows").then(e=>e.map(t=>new U(t,{skip:!0})))}const S=["tauri://created","tauri://error"];class U{constructor(t,i={}){var l;this.label=t,this.listeners=Object.create(null),i!=null&&i.skip||n("plugin:window|create",{options:{...i,parent:typeof i.parent=="string"?i.parent:(l=i.parent)===null||l===void 0?void 0:l.label,label:t}}).then(async()=>this.emit("tauri://created")).catch(async s=>this.emit("tauri://error",s))}static async getByLabel(t){var i;return(i=(await A()).find(l=>l.label===t))!==null&&i!==void 0?i:null}static getCurrent(){return k()}static async getAll(){return A()}static async getFocusedWindow(){for(const t of await A())if(await t.isFocused())return t;return null}async listen(t,i){return this._handleTauriEvent(t,i)?()=>{const l=this.listeners[t];l.splice(l.indexOf(i),1)}:F(t,i,{target:{kind:"Window",label:this.label}})}async once(t,i){return this._handleTauriEvent(t,i)?()=>{const l=this.listeners[t];l.splice(l.indexOf(i),1)}:Z(t,i,{target:{kind:"Window",label:this.label}})}async emit(t,i){if(S.includes(t)){for(const l of this.listeners[t]||[])l({event:t,id:-1,payload:i});return}return Q(t,i)}async emitTo(t,i,l){if(S.includes(i)){for(const s of this.listeners[i]||[])s({event:i,id:-1,payload:l});return}return Y(t,i,l)}_handleTauriEvent(t,i){return S.includes(t)?(t in this.listeners?this.listeners[t].push(i):this.listeners[t]=[i],!0):!1}async scaleFactor(){return n("plugin:window|scale_factor",{label:this.label})}async innerPosition(){return n("plugin:window|inner_position",{label:this.label}).then(t=>new d(t))}async outerPosition(){return n("plugin:window|outer_position",{label:this.label}).then(t=>new d(t))}async innerSize(){return n("plugin:window|inner_size",{label:this.label}).then(t=>new _(t))}async outerSize(){return n("plugin:window|outer_size",{label:this.label}).then(t=>new _(t))}async isFullscreen(){return n("plugin:window|is_fullscreen",{label:this.label})}async isMinimized(){return n("plugin:window|is_minimized",{label:this.label})}async isMaximized(){return n("plugin:window|is_maximized",{label:this.label})}async isFocused(){return n("plugin:window|is_focused",{label:this.label})}async isDecorated(){return n("plugin:window|is_decorated",{label:this.label})}async isResizable(){return n("plugin:window|is_resizable",{label:this.label})}async isMaximizable(){return n("plugin:window|is_maximizable",{label:this.label})}async isMinimizable(){return n("plugin:window|is_minimizable",{label:this.label})}async isClosable(){return n("plugin:window|is_closable",{label:this.label})}async isVisible(){return n("plugin:window|is_visible",{label:this.label})}async title(){return n("plugin:window|title",{label:this.label})}async theme(){return n("plugin:window|theme",{label:this.label})}async isAlwaysOnTop(){return n("plugin:window|is_always_on_top",{label:this.label})}async center(){return n("plugin:window|center",{label:this.label})}async requestUserAttention(t){let i=null;return t&&(t===W.Critical?i={type:"Critical"}:i={type:"Informational"}),n("plugin:window|request_user_attention",{label:this.label,value:i})}async setResizable(t){return n("plugin:window|set_resizable",{label:this.label,value:t})}async setEnabled(t){return n("plugin:window|set_enabled",{label:this.label,value:t})}async isEnabled(){return n("plugin:window|is_enabled",{label:this.label})}async setMaximizable(t){return n("plugin:window|set_maximizable",{label:this.label,value:t})}async setMinimizable(t){return n("plugin:window|set_minimizable",{label:this.label,value:t})}async setClosable(t){return n("plugin:window|set_closable",{label:this.label,value:t})}async setTitle(t){return n("plugin:window|set_title",{label:this.label,value:t})}async maximize(){return n("plugin:window|maximize",{label:this.label})}async unmaximize(){return n("plugin:window|unmaximize",{label:this.label})}async toggleMaximize(){return n("plugin:window|toggle_maximize",{label:this.label})}async minimize(){return n("plugin:window|minimize",{label:this.label})}async unminimize(){return n("plugin:window|unminimize",{label:this.label})}async show(){return n("plugin:window|show",{label:this.label})}async hide(){return n("plugin:window|hide",{label:this.label})}async close(){return n("plugin:window|close",{label:this.label})}async destroy(){return n("plugin:window|destroy",{label:this.label})}async setDecorations(t){return n("plugin:window|set_decorations",{label:this.label,value:t})}async setShadow(t){return n("plugin:window|set_shadow",{label:this.label,value:t})}async setEffects(t){return n("plugin:window|set_effects",{label:this.label,value:t})}async clearEffects(){return n("plugin:window|set_effects",{label:this.label,value:null})}async setAlwaysOnTop(t){return n("plugin:window|set_always_on_top",{label:this.label,value:t})}async setAlwaysOnBottom(t){return n("plugin:window|set_always_on_bottom",{label:this.label,value:t})}async setContentProtected(t){return n("plugin:window|set_content_protected",{label:this.label,value:t})}async setSize(t){return n("plugin:window|set_size",{label:this.label,value:t instanceof b?t:new b(t)})}async setMinSize(t){return n("plugin:window|set_min_size",{label:this.label,value:t instanceof b?t:t?new b(t):null})}async setMaxSize(t){return n("plugin:window|set_max_size",{label:this.label,value:t instanceof b?t:t?new b(t):null})}async setSizeConstraints(t){function i(l){return l?{Logical:l}:null}return n("plugin:window|set_size_constraints",{label:this.label,value:{minWidth:i(t==null?void 0:t.minWidth),minHeight:i(t==null?void 0:t.minHeight),maxWidth:i(t==null?void 0:t.maxWidth),maxHeight:i(t==null?void 0:t.maxHeight)}})}async setPosition(t){return n("plugin:window|set_position",{label:this.label,value:t instanceof v?t:new v(t)})}async setFullscreen(t){return n("plugin:window|set_fullscreen",{label:this.label,value:t})}async setFocus(){return n("plugin:window|set_focus",{label:this.label})}async setIcon(t){return n("plugin:window|set_icon",{label:this.label,value:m(t)})}async setSkipTaskbar(t){return n("plugin:window|set_skip_taskbar",{label:this.label,value:t})}async setCursorGrab(t){return n("plugin:window|set_cursor_grab",{label:this.label,value:t})}async setCursorVisible(t){return n("plugin:window|set_cursor_visible",{label:this.label,value:t})}async setCursorIcon(t){return n("plugin:window|set_cursor_icon",{label:this.label,value:t})}async setBackgroundColor(t){return n("plugin:window|set_background_color",{color:t})}async setCursorPosition(t){return n("plugin:window|set_cursor_position",{label:this.label,value:t instanceof v?t:new v(t)})}async setIgnoreCursorEvents(t){return n("plugin:window|set_ignore_cursor_events",{label:this.label,value:t})}async startDragging(){return n("plugin:window|start_dragging",{label:this.label})}async startResizeDragging(t){return n("plugin:window|start_resize_dragging",{label:this.label,value:t})}async setBadgeCount(t){return n("plugin:window|set_badge_count",{label:this.label,value:t})}async setBadgeLabel(t){return n("plugin:window|set_badge_label",{label:this.label,value:t})}async setOverlayIcon(t){return n("plugin:window|set_overlay_icon",{label:this.label,value:t?m(t):void 0})}async setProgressBar(t){return n("plugin:window|set_progress_bar",{label:this.label,value:t})}async setVisibleOnAllWorkspaces(t){return n("plugin:window|set_visible_on_all_workspaces",{label:this.label,value:t})}async setTitleBarStyle(t){return n("plugin:window|set_title_bar_style",{label:this.label,value:t})}async setTheme(t){return n("plugin:window|set_theme",{label:this.label,value:t})}async onResized(t){return this.listen(o.WINDOW_RESIZED,i=>{i.payload=new _(i.payload),t(i)})}async onMoved(t){return this.listen(o.WINDOW_MOVED,i=>{i.payload=new d(i.payload),t(i)})}async onCloseRequested(t){return this.listen(o.WINDOW_CLOSE_REQUESTED,async i=>{const l=new K(i);await t(l),l.isPreventDefault()||await this.destroy()})}async onDragDropEvent(t){const i=await this.listen(o.DRAG_ENTER,r=>{t({...r,payload:{type:"enter",paths:r.payload.paths,position:new d(r.payload.position)}})}),l=await this.listen(o.DRAG_OVER,r=>{t({...r,payload:{type:"over",position:new d(r.payload.position)}})}),s=await this.listen(o.DRAG_DROP,r=>{t({...r,payload:{type:"drop",paths:r.payload.paths,position:new d(r.payload.position)}})}),c=await this.listen(o.DRAG_LEAVE,r=>{t({...r,payload:{type:"leave"}})});return()=>{i(),s(),l(),c()}}async onFocusChanged(t){const i=await this.listen(o.WINDOW_FOCUS,s=>{t({...s,payload:!0})}),l=await this.listen(o.WINDOW_BLUR,s=>{t({...s,payload:!1})});return()=>{i(),l()}}async onScaleChanged(t){return this.listen(o.WINDOW_SCALE_FACTOR_CHANGED,t)}async onThemeChanged(t){return this.listen(o.WINDOW_THEME_CHANGED,t)}}var z;(function(e){e.Disabled="disabled",e.Throttle="throttle",e.Suspend="suspend"})(z||(z={}));var I;(function(e){e.AppearanceBased="appearanceBased",e.Light="light",e.Dark="dark",e.MediumLight="mediumLight",e.UltraDark="ultraDark",e.Titlebar="titlebar",e.Selection="selection",e.Menu="menu",e.Popover="popover",e.Sidebar="sidebar",e.HeaderView="headerView",e.Sheet="sheet",e.WindowBackground="windowBackground",e.HudWindow="hudWindow",e.FullScreenUI="fullScreenUI",e.Tooltip="tooltip",e.ContentBackground="contentBackground",e.UnderWindowBackground="underWindowBackground",e.UnderPageBackground="underPageBackground",e.Mica="mica",e.Blur="blur",e.Acrylic="acrylic",e.Tabbed="tabbed",e.TabbedDark="tabbedDark",e.TabbedLight="tabbedLight"})(I||(I={}));var O;(function(e){e.FollowsWindowActiveState="followsWindowActiveState",e.Active="active",e.Inactive="inactive"})(O||(O={}));async function X(){const e=await j("icons/tray-icon.png"),t=await g.fromPath(e);await L.new({icon:t,iconAsTemplate:!0,action:async i=>{await J(i);const l=await k(),s=await l.isVisible();i.type=="Click"&&i.buttonState=="Down"&&(await q(T.TrayCenter),s?await l.hide():(await l.show(),await l.setFocus()))}})}async function B(e=0){await n("plugin:process|exit",{code:e})}const tt=async()=>{const e=await k();e.onFocusChanged(({payload:t})=>{t||e.hide()})};tt();window.addEventListener("DOMContentLoaded",()=>{new G().init();async function t(){await X()}t(),document.querySelector('[data-action="terminate"]').addEventListener("click",async()=>{await B(0)}),document.querySelector('[data-action="settings"]').addEventListener("click",async()=>{console.log("click settings")})});
